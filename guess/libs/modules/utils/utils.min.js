var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},utils;!function(e){var t=function(){function e(){this.listeners={}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.addEventListener=function(e,t,n,s){var o=this,i=o._addEventListener(e,t,n,s);o.listeners[e].push(i)},e.prototype.once=function(e,t,n,s){var o=this,i=o._addEventListener(e,t,n,s,!0);o.listeners[e].push(i)},e.prototype._addEventListener=function(e,t,n,s,o){void 0===o&&(o=!1);var i=this;i.listeners||(i.listeners={}),i.listeners[e]||(i.listeners[e]=[]);var r={};return r.listener=t,r.thisObj=n,r.refObj=s,r.once=o,r},e.prototype.removeEventListener=function(e,t,n){var s=this;if(s.listeners[e]&&s.listeners[e].length){for(var o=s.listeners[e],i=0;i<o.length;i++){var r=o[i];r.listener==t&&r.thisObj==n&&o.splice(i--,1)}o.length||delete s.listeners[e]}},e.prototype.removeAllEventListener=function(e){var t=this;t.listeners[e]&&(t.listeners[e]=null,delete t.listeners[e])},e.prototype.removeAll=function(){var e=this;e.listeners={}},e.prototype.dispatchEvent=function(e,t,n){var s=this;if(s.listeners[e]&&s.listeners[e].length){for(var o=s.listeners[e],i=0;i<o.length;i++){var r=o[i];n&&n!=r.refObj||(r.once&&o.splice(i--,1),r.listener.call(r.thisObj,t))}o.length||delete s.listeners[e]}},e.prototype.dispose=function(){var t=this;t.listeners=null,e.instance=null},e}();e.EventDispatcher=t,__reflect(t.prototype,"utils.EventDispatcher")}(utils||(utils={}));var utils;!function(e){e.grayFilters=function(){var e=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],t=new egret.ColorMatrixFilter(e);return[t]}}(utils||(utils={}));var utils;!function(e){var t=function(){function e(){this.pause=!1;var e=this;e.pool={},e.list=[],egret.MainContext.instance.stage.addEventListener(egret.Event.ENTER_FRAME,e.onEnterFrame,e)}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.onEnterFrame=function(){var e=this;if(!e.pause){var t=egret.getTimer();e.lastEnterFrameTime=e.lastEnterFrameTime||t;for(var n=t-e.lastEnterFrameTime,s=e.list.concat(),o=0,i=s.length;i>o;o++){var r=s[o];r.onEnterFrame(n)}e.lastEnterFrameTime=egret.getTimer()}},e.prototype.createObject=function(e){var t,n=this,s=egret.getQualifiedClassName(e);s=s.split(".")[1];var o=n.pool[s];return null!=o&&o.length?t=o.shift():(t=new e,t.key=s),t.onCreate(),n.list.push(t),t},e.prototype.createFairyUIObject=function(e,t){var n,s=this,o=egret.getQualifiedClassName(e);o=o.split(".")[1];var i=s.pool[o];return null!=i&&i.length?n=i.shift():(n=fairygui.UIPackage.createObject(t,o,e),n.key=o),n.onCreate(),s.list.push(n),n},e.prototype.destroyObject=function(e){var t=this;e.onDestroy();var n=e.key;null==t.pool[n]&&(t.pool[n]=[]),t.pool[n].push(e);var s=e.parent;s&&s.removeChild(e);var o=t.list.indexOf(e);-1!=o&&t.list.splice(o,1)},e.prototype.dispose=function(){var t=this;egret.MainContext.instance.stage.removeEventListener(egret.Event.ENTER_FRAME,t.onEnterFrame,t);for(var n=0;n<t.list.length;n++){var s=t.list[n];s.onDestroy();var o=s.parent;o?o.removeChild(s):s.displayObject&&s.displayObject.parent&&(o=s.displayObject.parent,o.removeChild(s.displayObject))}t.list=null,t.pool=null,e.instance=null},e}();e.ObjectPool=t,__reflect(t.prototype,"utils.ObjectPool")}(utils||(utils={}));var utils;!function(e){var t=function(){function e(){}return e.get=function(e){var t=e;return t.instance||(t.instance=new t,t.instance.onCreate&&t.instance.onCreate()),t.instance},e.destroy=function(t){var n=e.get(t);n.onDestroy&&n.onDestroy(),t.instance=null},e}();e.Singleton=t,__reflect(t.prototype,"utils.Singleton")}(utils||(utils={}));var utils;!function(e){var t=function(){function e(){this.lastBgmPos=0,this.bgmLoops=0,this.isMuteBgm=!1,this.isMuteSound=!1}return e.prototype.onCreate=function(){var e=this;e.sounds={};var t=egret.localStorage.getItem("isMuteBgm");e.isMuteBgm=t&&"1"==t;var n=egret.localStorage.getItem("isMuteSound");e.isMuteSound=n&&"1"==n},e.prototype.onDestroy=function(){var e=this;e.disposeBgm(),e.disposeAllSound()},e.prototype.playBgm=function(e,t,n,s){void 0===t&&(t=0),void 0===n&&(n=0),void 0===s&&(s=1);var o=this;o.bgmSoundChannel&&o.bgmSoundChannel.stop(),o.bgm||(o.bgm=RES.getRes(e)),o.bgmLoops=n,o.isMuteBgm||(o.bgmSoundChannel=o.bgm.play(t||o.lastBgmPos,n),o.bgmSoundChannel.volume=s)},e.prototype.pauseBgm=function(){var e=this;e.bgmSoundChannel&&(e.lastBgmPos=e.bgmSoundChannel.position,e.bgmSoundChannel.stop())},e.prototype.resumeBgm=function(){var e=this;e.bgm&&(e.bgmSoundChannel=e.bgm.play(e.lastBgmPos,e.bgmLoops))},e.prototype.disposeBgm=function(){var e=this;e.bgmSoundChannel.stop(),e.bgmSoundChannel=null,e.bgm.close(),e.bgm=null},e.prototype.setBgmMute=function(e){var t=this;t.isMuteBgm!=e&&(e?t.pauseBgm():t.resumeBgm(),t.isMuteBgm=e,egret.localStorage.setItem("isMuteBgm",e?"1":"0"))},e.prototype.playSound=function(e,t,n,s){void 0===t&&(t=0),void 0===n&&(n=1),void 0===s&&(s=1);var o=this;if(!o.isMuteSound){var i,r=o.sounds[e];r?i=r.sound:(i=RES.getRes(e),o.sounds[e]={sound:i}),o.sounds[e].loops=n;var a=i.play(t,n);a.volume=s,o.sounds[e].channel=a}},e.prototype.pauseSound=function(e){var t=this,n=t.sounds[e];n&&n.channel.stop()},e.prototype.pauseAllSound=function(){var e=this;for(var t in e.sounds){var n=e.sounds[t],s=n.channel;n.lastSoundPos=s.position,s.stop()}},e.prototype.resumeSound=function(e){var t=this,n=t.sounds[e];if(n){n.channel;n.channel=n.sound.play(n.lastSoundPos,n.loops)}},e.prototype.setSoundMute=function(e){var t=this;t.isMuteSound!=e&&(e&&t.pauseAllSound(),t.isMuteSound=e,egret.localStorage.setItem("isMuteSound",e?"1":"0"))},e.prototype.disposeSound=function(e){var t=this,n=t.sounds[e];if(n){var s=n.sound;s.close();var o=n.channel;o.stop(),t.sounds[e]=null,delete t.sounds[e]}},e.prototype.disposeAllSound=function(){var e=this;for(var t in e.sounds)e.disposeSound(t);e.sounds=null},e}();e.SoundMgr=t,__reflect(t.prototype,"utils.SoundMgr",["utils.ISingleton"])}(utils||(utils={}));var utils;!function(e){var t=function(){function e(){}return Object.defineProperty(e,"stage",{get:function(){return egret.MainContext.instance.stage},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stageWidth",{get:function(){return egret.MainContext.instance.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stageHeight",{get:function(){return egret.MainContext.instance.stage.stageHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e,"halfStageWidth",{get:function(){return.5*egret.MainContext.instance.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"halfStageHeight",{get:function(){return.5*egret.MainContext.instance.stage.stageHeight},enumerable:!0,configurable:!0}),e.dispatchEvent=function(t,n,s,o){e.stage.dispatchEventWith(t,n,s,o)},e.addEventListener=function(t,n,s){e.stage.addEventListener(t,n,s)},e.removeEventListener=function(t,n,s){e.stage.removeEventListener(t,n,s)},e}();e.StageUtils=t,__reflect(t.prototype,"utils.StageUtils")}(utils||(utils={}));